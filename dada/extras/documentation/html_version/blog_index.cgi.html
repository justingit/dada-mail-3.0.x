<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>blog_index.cgi - A simple blog-style view of your archived list messages</title>
<link rel="stylesheet" href="/Users/justin/Documents/DadaMail/build/tmp/dada/extras/documentation/pod_source/pod_styles.css" type="text/css" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:root@omen.apple.com" />
</head>

<body>

<p><a name="__index__"></a></p>
<!-- INDEX BEGIN -->

<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#description">DESCRIPTION</a></li>
	<li><a href="#usage">USAGE</a></li>
	<ul>

		<li><a href="#use_it_like_a_cgi_script_">Use it like a CGI script.</a></li>
		<li><a href="#as_a_javascript_library">As a Javascript Library</a></li>
		<li><a href="#as_a_server_side_include">As a Server Side Include</a></li>
		<li><a href="#by_itself">By Itself</a></li>
		<li><a href="#by_copying_the_html_javascript">By Copying the HTML/Javascript</a></li>
	</ul>

	<li><a href="#configuration">CONFIGURATION</a></li>
	<ul>

		<li><a href="#_plugin_config__default_list_">$Plugin_Config-&gt;{Default_List}</a></li>
	</ul>

	<li><a href="#diagnostics">DIAGNOSTICS</a></li>
	<li><a href="#configuration_and_environment">CONFIGURATION AND ENVIRONMENT</a></li>
	<li><a href="#see_also">SEE ALSO</a></li>
	<li><a href="#dependencies">DEPENDENCIES</a></li>
	<li><a href="#incompatibilities">INCOMPATIBILITIES</a></li>
	<li><a href="#bugs_and_limitations">BUGS AND LIMITATIONS</a></li>
	<li><a href="#author">AUTHOR</a></li>
	<li><a href="#licence_and_copyright">LICENCE AND COPYRIGHT</a></li>
</ul>
<!-- INDEX END -->

<hr />
<p>
</p>
<h1><a name="name">NAME</a></h1>
<p>blog_index.cgi - A simple blog-style view of your list's archived messages</p>
<p>
</p>
<hr />
<h1><a name="description">DESCRIPTION</a></h1>
<p>This small extension script prints out the last, <strong>x</strong> archived messages, in a blog-style fashion, with the text of all the archived messages shown on one screen. You can then embed this into a page you may have on your site, either by calling the extension like a Javascript library, or calling it as an old-school Apache Server Side Include.</p>
<p>In a pinch, you can then use Dada Mail in a more blog-like manner, by creating new entries to your Dada Mail-powered blog by creating new archive messages:</p>
<p>In Dada Mail's, ``Send a List Message'' screen, there's a fieldset labeled, <strong>Archive Options</strong>. Expanding this fieldset will reveal options to, <strong>Archive, but DO NOT Send</strong> the message you're creating and also an option to <strong>Backdate</strong> the entry. This will allow you to add new entries to your list's archives, without having to send the messages out to your subscribers.</p>
<p>One thing I find useful is to have my blog powered by Dada Mail: I can make new entries more frequently, but just archive and not sending - much more frequently than I feel comfortable sending to my entire list, but have all the entries available on my blog. That way, my mailing list gets the more important messages sent and if I want to get a bit chatty, I can, without deluging my list with messages they may not want to have fill up their inbox.</p>
<p>This simple extension does not support some of the more familiar blog-like things, such as commenting on an entry, but does provide other features. Since Dada Mail already supports RSS/Atom feeds for its archived messages, your blog powered by Dada Mail does as well. The core of Dada Mail also supports full text searching of archived messages.</p>
<p>For a simple site where a blog is just one part of the entire site, such simplicity may be all you really need.</p>
<p>
</p>
<hr />
<h1><a name="usage">USAGE</a></h1>
<p>
</p>
<h2><a name="use_it_like_a_cgi_script_">Use it like a CGI script.</a></h2>
<p>Put it in your, <strong>extensions</strong> directory (ala: cgi-bin/dada/extensions), chmod 755, visit it in your web browser.</p>
<p>
</p>
<h2><a name="as_a_javascript_library">As a Javascript Library</a></h2>
<p>To add this form to your HTML page, just add a line that looks like this: 
</p>
<pre>

        &lt;script type=&quot;text/javascript&quot; src=&quot;<a href="http://example.com/cgi-bin/dada/extensions/blog_index.cgi">http://example.com/cgi-bin/dada/extensions/blog_index.cgi</a>&quot;&gt;&lt;/script&gt;</pre>
<p>Where, <em><a href="http://example.com/cgi-bin/dada/extensions/blog_index.cgi">http://example.com/cgi-bin/dada/extensions/blog_index.cgi</a></em> is the URL to this extension.</p>
<p>
</p>
<h2><a name="as_a_server_side_include">As a Server Side Include</a></h2>
<p>You can also call it as a server side include, like this:</p>
<pre>
  &lt;!--#include virtual=&quot;/cgi-bin/dada/blog_index?mode=html&quot; --&gt;</pre>
<p>Make sure to add the query string, <code>mode=html</code></p>
<p>
</p>
<h2><a name="by_itself">By Itself</a></h2>
<p>Not really a method, but you can view the HTML and Javascript produced by visiting the extension in your web browser, with the same query string you use for the Server Side Include:</p>
<p><a href="http://example.com/cgi-bin/dada/blog_index.cgi?mode=html">http://example.com/cgi-bin/dada/blog_index.cgi</a></p>
<p>
</p>
<h2><a name="by_copying_the_html_javascript">By Copying the HTML/Javascript</a></h2>
<p>You could also try just copying the source that this script produces from the URL above, and paste it into a page/script/etc that you'd like.</p>
<p>Probably not the best idea, but I'll throw that idea for ya.</p>
<p>
</p>
<hr />
<h1><a name="configuration">CONFIGURATION</a></h1>
<p>There's no configuration that you are <strong>required</strong> to do, but there's many things that you <strong>can</strong> do. We'll try to cover everything:</p>
<p>
</p>
<h2><a name="_plugin_config__default_list_">$Plugin_Config-&gt;{Default_List}</a></h2>
<p>This extension currently shows <strong>one</strong> list's archives at one time - there's no collating of archive entries from different lists, or anything.</p>
<p>The, <code>Default_List</code> config variable holds what the default list can be. Set it to a list's shortname:</p>
<pre>
 $Plugin_Config-&gt;{Default_List}  = 'mylistshortname';</pre>
<p>If no list is set, you will need to tack on a query string to the end of the script, when you call it:</p>
<pre>
 <a href="http://example.com/cgi-bin/dada/extensions/blog_index.cgi?list=mylistshortname">http://example.com/cgi-bin/dada/extensions/blog_index.cgi?list=mylistshortname</a></pre>
<p>In this example, <code>mylistshortname</code> is your list's shortname and:</p>
<pre>
 ?list=mylistshortname</pre>
<p>Is the entire query string you'll have to tack on.</p>
<p>If you've configured this variable incorrectly, you'll most likely receive an error in your web browser, so take care in setting it correctly.</p>
<p>
</p>
<hr />
<h1><a name="diagnostics">DIAGNOSTICS</a></h1>
<p>None, really.</p>
<p>
</p>
<hr />
<h1><a name="configuration_and_environment">CONFIGURATION AND ENVIRONMENT</a></h1>
<p>There are a few variables at the top of the script that will need to be changed. They are:</p>
<ul>
<li><strong><a name="item__plugin_config_default_list_">$Plugin_Config{Default_List}</a></strong>

<p><strong>Required</strong></p>
<p>You'll need to set <strong>$Plugin_Config{Default_List}</strong> to a valid list shortname that you would like to use for your blog index.</p>
</li>
<li><strong><a name="item__plugin_config_entries_">$Plugin_Config{Entries}</a></strong>

<p><strong>Optional</strong></p>
<p><strong>$Plugin_Config{Entries}</strong> holds the count of how many archived messages you'd like shown at once. If set to <code>undef</code> or a number below, <strong>1</strong>, this extension will use the default value set in the <strong>Manage Archives - Archive Options - Advanced</strong> list control panel screen (which itself defaults to, <strong>10</strong>.</p>
</li>
<li><strong><a name="item__plugin_config_style_">$Plugin_Config{Style}</a></strong>

<p><strong>Optional</strong></p>
<p>Currently, there are two styles supported when showing the archived messages, <strong>full</strong> and, <strong>blurb</strong></p>
<p>If this variable is set to, <strong>full</strong>, the entire archived message will be shown.</p>
<p>If this variable is set to, <strong>blurb</strong>, only the first few words (basically) will be shown and a link to the rest will be provided.</p>
</li>
<li><strong><a name="item_allow_qs_overrides">Allow_QS_Overrides</a></strong>

<p><strong>Optional</strong></p>
<p>If set to, <code>1</code> you're allowed to set the <code>style</code> and <code>entries</code> configurations in the query string, like this:</p>
<pre>
 <a href="http://example.com/cgi-bin/dada/extensions/blog_index.cgi?list=mylistshortname&amp;entries=10&amp;style=full">http://example.com/cgi-bin/dada/extensions/blog_index.cgi?list=mylistshortname&amp;entries=10&amp;style=full</a></pre>
<p><code>entries</code> corresponds to, &lt;$Plugin_Config{Entries}&gt;</p>
<p><code>style</code> corresponds to, &lt;$Plugin_Config{Style}&gt;</p>
</li>
<li><strong><a name="item__plugin_config_template_">$Plugin_Config{Template}</a></strong>

<p><strong>Optional</strong></p>
<p>This variable holds the embedded template for the actual HTML to display. If you'd like to change the design of the HTML that's outputting, here's the place to do it.</p>
<p>The Template is written in the HTML::Template system, just like much of the rest of Dada Mail.</p>
<p>Some of the variables that are available:</p>
<ul>
<li><strong><a name="item_archive_entries">archive_entries</a></strong>

<p>This holds all the archived entries that are to be displayed. You'll most likely want to call it in a loop:</p>
<pre>
 &lt;!-- tmpl_loop archive_entries --&gt; 
    ...
 &lt;!--/tmp_loop&gt;</pre>
<p>You can also use it to check the existance of entries available:</p>
<pre>
 &lt;!-- tmpl_unless archive_entries --&gt; 
    Currently, there are no archived entries! 
 &lt;!--/tmpl_unless--&gt;</pre>
<p>When you're looping over all the archived messages, other variables will be available to you, inside the loop:</p>
<ul>
<li><strong><a name="item_pretty_subject">pretty_subject</a></strong>

<p>``pretty-fied'' version of the subject. If you want the raw subject, use the <code>subject</code> variable.</p>
</li>
<li><strong><a name="item_pretty_date">pretty_date</a></strong>

<p>``pretty-fied'' version of the date the message was posted on. Should be following the formatting options you've set in: <strong>Manage Archive - Archive Options - Advanced</strong></p>
</li>
<li><strong><a name="item_blurb_style">blurb_style</a></strong>

<p>Is set to, <strong>1</strong> if you're using the, <strong>blurb</strong> style in, <code>$Plugin_Config-</code>{Style}&gt;.</p>
</li>
<li><strong><a name="item_message">message</a></strong>

<p>Will hold the actual email message body. If you're using the, <strong>full</strong> style, the message will already be converted to HTML (if needed) and massaged in a way that it'll look really well without any help.</p>
<p>If you're using the <strong>blurb</strong> style, the message will be a plaintext string, with all HTML encoding stripped.</p>
</li>
<li><strong><a name="item_program_url">PROGRAM_URL</a></strong>

<p>Holds the URL to your Dada Mail Installation</p>
</li>
<li><strong><a name="item_list">list</a></strong>

<p>Holds the value that you've set in, <strong>$List</strong></p>
</li>
<li><strong><a name="item_message_id">message_id</a></strong>

<p>Holds the <strong>message_id</strong> that's associated with the archived message.</p>
</li>
</ul>
<li><strong>list</strong>

<p>Holds the value that you've set in, <strong>$List</strong></p>
<p>(This is also available to you, <strong>outside</strong> of the <a href="#item_archive_entries"><code>archive_entries</code></a> loop.</p>
</li>
<li><strong>PROGRAM_URL</strong>

<p>Holds the URL to your Dada Mail Installation</p>
<p>(This is also available to you, <strong>outside</strong> of the <a href="#item_archive_entries"><code>archive_entries</code></a> loop.</p>
</li>
</ul>
</ul>
<p>
</p>
<hr />
<h1><a name="see_also">SEE ALSO</a></h1>
<p>Dada Mail also can share its archives using its built-in RSS/Atom feeds. In your list control panel, go to:</p>
<p><strong>Manage Archive - Archive Options - Advanced</strong></p>
<p>
</p>
<hr />
<h1><a name="dependencies">DEPENDENCIES</a></h1>
<p>
</p>
<hr />
<h1><a name="incompatibilities">INCOMPATIBILITIES</a></h1>
<p>
</p>
<hr />
<h1><a name="bugs_and_limitations">BUGS AND LIMITATIONS</a></h1>
<p>Currently, this extension is simple, and only handles one list at a time.</p>
<p>If this extension becomes popular, I may give it the capability to handle all lists and at the same time, as well as have some of the more interesting archive capabilities support (embedded attachments, etc)</p>
<p>Please, let me know if you find any bugs.</p>
<p>
</p>
<hr />
<h1><a name="author">AUTHOR</a></h1>
<p>Justin Simoni</p>
<p>See: <a href="http://dadamailproject.com/contact">http://dadamailproject.com/contact</a></p>
<p>
</p>
<hr />
<h1><a name="licence_and_copyright">LICENCE AND COPYRIGHT</a></h1>
<p>Copyright (c) 2007-2008 Justin Simoni All rights reserved.</p>
<p>This program is free software; you can redistribute it and/or
modify it under the terms of the GNU General Public License
as published by the Free Software Foundation; either version 2
of the License, or (at your option) any later version.</p>
<p>This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

</p>
<p>You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 59 Temple Place - Suite 330, 
Boston, MA  02111-1307, USA.

</p>

</body>

</html>
